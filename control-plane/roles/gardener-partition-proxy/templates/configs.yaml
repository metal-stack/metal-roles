---
apiVersion: v1
kind: ConfigMap
metadata:
  name: partition-proxy
  namespace: partition-proxy
data:
  nginx.conf: "{{ lookup('template', 'nginx.conf') }}"
{% for conf in gardener_shooted_seed.proxy_servers %}
---
apiVersion: v1
kind: Secret
metadata:
  name: partition-proxy-{{ conf.name }}
  namespace: partition-proxy
type: Opaque
data:
  ca.pem: "{{ conf.ca | b64encode }}"
  cert.pem: "{{ conf.cert | b64encode }}"
  cert.key: "{{ conf.cert_key | b64encode }}"
{% endfor %}
